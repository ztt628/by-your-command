(function(){var src="",bycRe=new RegExp(/\[size=(1|0)\]\[color=#(F4F4FF|FFFFFF)\]BYC seed: \S+\[\/color\]\[\/size\]/,"g"),n_mRe=new RegExp(/\[size=(1|0)\]\[color=#(F4F4FF|FFFFFF)\]N-M seed: \S+\[\/color\]\[\/size\]/,"g"),qmgRe=new RegExp(/\[size=(1|0)\]\[color=#(F4F4FF|FFFFFF)\]QMG seed: \S+\[\/color\]\[\/size\]/,"g"),lenRe=new RegExp(/\[size=(1|0)\]\[color=#(F4F4FF|FFFFFF)\]LEN seed: \S+\[\/color\]\[\/size\]/,"g"),sisRe=new RegExp(/\[size=(1|0)\]\[color=#(F4F4FF|FFFFFF)\]SIS seed: \S+\[\/color\]\[\/size\]/,"g"),tmrRe=new RegExp(/\[size=(1|0)\]\[color=#(F4F4FF|FFFFFF)\]TMR seed: \S+\[\/color\]\[\/size\]/,"g"),cctRe=new RegExp(/\[size=(1|0)\]\[color=#(F4F4FF|FFFFFF)\]CCT seed: \S+\[\/color\]\[\/size\]/,"g"),res=[bycRe,n_mRe,qmgRe,lenRe,sisRe,tmrRe,cctRe],ts=document.getElementsByTagName("textarea"),t=ts[ts.length-1];if(void 0===t)return void alert("These scripts only work while creating or editing a post on the BGG forums.");let game=-1;for(let e=0;!(e>=res.length);e++){let a=res[e].exec(t.value);null!==a&&(game=e)}if(-1===game){let e=prompt("What game would you like to play? (1-7)\n1: Battlestar Galactica\n2: Dark Moon\n3: Quartermaster General: 1914\n4: Leaving Earth\n5: Warehouse 13: The Board Game\n6: Unfathomable\n7: Blood on the Clocktower");if(game=parseInt(e),!Number.isInteger(game)||1>game||game>res.length)return;game--}var names=["BYC","NMWS","QMG","LE","SIS","TMR","CC"],filenames=[["BYCv2"],["darkmoonv2"],["qmg1914v3"],["leavingearth"],["warehouse13beta"],["TMRlocalization","TMRv2"],["ccscript"]],suffixes=[["A","B","C","D","E","F"],[""],["A","B"],["A","B"],[""],["L","A","B","C"],["A","B"]],qres=[],counts=[-1,-1,-1,-1,-1,1,-1];for(let e=0;!(e>=suffixes[game].length);e++)qres.push(new RegExp("START"+names[game]+suffixes[game][e]+"[\\s\\S]*?END"+names[game]+suffixes[game][e],"g"));function reqListener(){src=this.responseText;var done=!0,found=0,any=!1,gtre=new RegExp("&gt;","g"),ampre=new RegExp("&amp;","g"),quotre=new RegExp("&quot;","g"),are=new RegExp(String.fromCharCode(60)+"[^>]*>","g"),totalJs="",jsPart="";for(let e=0;!(e>=qres.length);e++){var js=qres[e].exec(src);if(null===js){jsPart=window.localStorage.getItem(names[game].toLowerCase()+"Js"+suffixes[game][e]),null===jsPart?done=!1:(totalJs+=jsPart,found+=1);continue}let a=5+names[game].length+suffixes[game][e].length,t=-(3+names[game].length+suffixes[game][e].length);jsPart=js[0].slice(a,t),jsPart=jsPart.replace(gtre,">"),jsPart=jsPart.replace(ampre,"&"),jsPart=jsPart.replace(quotre,'"'),jsPart=jsPart.replace(are,""),window.localStorage.setItem(names[game].toLowerCase()+"Js"+suffixes[game][e],jsPart),totalJs+=jsPart,found+=1,any=!0}if(any)if(done){window.localStorage.removeItem(names[game].toLowerCase()+"Urgent");try{eval(totalJs)}catch(e){window.localStorage.setItem(names[game].toLowerCase()+"Urgent","error (updated)"),alert(names[game]+" encountered the following error:\n"+e.message+"\nPlease GM Grafin and let her know the error you encountered and what you were trying to do when "+names[game]+" encountered the error."),console.error(e)}}else{if(found!==counts[game])return void alert("Could not read script");{let e=new XMLHttpRequest;e.addEventListener("load",reqListener),e.open("GET","https://ztt628.github.io/by-your-command/"+filenames[game][1]+".js"),e.send()}}else alert("Could not read script")}var bycJs="",done=!0;for(let e=0;!(e>=qres.length);e++){var jsPart=window.localStorage.getItem(names[game].toLowerCase()+"Js"+suffixes[game][e]);if(null===jsPart){done=!1;break}bycJs+=jsPart}let urgent=window.localStorage.getItem(names[game].toLowerCase()+"Urgent");if(!done||urgent){var oReq=new XMLHttpRequest;for(let e=0;!(e>=qres.length);e++)window.localStorage.removeItem(names[game].toLowerCase()+"Js"+suffixes[game][e]);oReq.addEventListener("load",reqListener),oReq.open("GET","https://ztt628.github.io/by-your-command/"+filenames[game][0]+".js"),oReq.send()}else try{eval(bycJs)}catch(e){window.localStorage.setItem(names[game].toLowerCase()+"Urgent","error (not updated)"),alert(names[game]+" encountered an error:\n"+e.message+"\nThis error may have already been fixed; please run "+names[game]+" again and see if it reoccurs."),console.error(e)}})();